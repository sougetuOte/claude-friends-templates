# タスク生成テンプレート

あなたは経験豊富なテックリード兼プロジェクトマネージャーです。以下の要件定義書（requirements.md）と技術設計書（design.md）を完全に理解し、t-wada式TDDを厳密に適用した、開発チームのための具体的で実行可能な実装計画（Task.md）を作成してください。

### 要件定義書（requirements.md）
（ここに、requirements.md の内容をすべて貼り付ける）

### 技術設計書（design.md）
（ここに、design.md の内容をすべて貼り付ける）

### 実装計画 作成ルール

1. **フェーズ分け（Phasing）**:
   - まず、製品がエンドツーエンドで最低限動作する**「MVP（Minimum Viable Product）」**に必要なタスクを「Phase 1」として洗い出してください。
   - 残りのタスクを、機能の重要度や依存関係を考慮して、「Phase 2: 機能拡張」「Phase 3: 高度な機能」「Phase 4: 本番化対応」のように論理的なグループに分けてください。

2. **TDD（テスト駆動開発）の厳密適用**:
   - **各タスクは必ずRed-Green-Refactorサイクルを明記**してください
   - テストファイルの場所を明確に指定してください
   - テストケースの概要を含めてください
   - カバレッジ目標を設定してください

3. **タスクの分解**:
   - 技術設計書（`design.md`）に記載されている「コンポーネント」「インターフェース」「データモデル」を実装するための、具体的で小さなタスクに分解してください。
   - 各タスクには、何を行うべきかを明確に記述したサブタスクを箇条書きで含めてください。
   - **1タスクは2-4時間で完了できる粒度**にしてください。

4. **トレーサビリティ（追跡可能性）**:
   - **これが最も重要です。** 作成した**全てのタスク**について、それがどの要件定義書（`requirements.md`）の項目に対応しているかを示してください。
   - タスクの最後に `_Requirements: [要件番号], [要件番号]_` の形式で必ず明記してください。
   - 設計書への参照も `_設計参照: [設計書セクション名](相対パス)_` の形式で含めてください。

5. **技術的詳細の反映**:
   - 技術設計書に記載されている特定のライブラリ名、スキーマ定義、注意点などを、関連するタスクの注釈として含めてください。
   - セキュリティ、パフォーマンス、エラーハンドリングに関する考慮事項を明記してください。

6. **フォーマット**:
   - Markdownのチェックリスト形式（`- [ ]`）を使用してください。
   - 各フェーズは `##` の見出しを使用してください。
   - TDDステータスを絵文字で表現（🔴未実装 → 🟢実装済み → ✅リファクタリング完了）

### 出力フォーマット

```markdown
# Implementation Plan

## Phase 1: MVP (Minimum Viable Product)

### 基盤構築
- [ ] <タスク番号>. <タスクの要約> 🔴
  - テストファイル: `tests/test_<機能名>.py`
  - 実装ファイル: `src/<機能名>.py`
  - Red Phase:
    - [ ] <失敗するテストケース1>
    - [ ] <失敗するテストケース2>
  - Green Phase:
    - [ ] 最小限の実装で上記テストを通す
  - Refactor Phase:
    - [ ] <リファクタリング内容>
  - カバレッジ目標: 90%
  - <技術的な注釈>
  - _Requirements: <対応する要件番号>_
  - _設計参照: [設計セクション名](../design/<ファイル名>.md)_

... (タスクを繰り返す) ...

## Phase 2: 基本機能拡張
... (同様の形式で記載) ...

## Phase 3: 高度な機能
... (同様の形式で記載) ...

## Phase 4: 本番化対応
... (同様の形式で記載) ...

## レビューとリファクタリング計画

### Phase単体レビュー
- Phase 1完了時: 基盤アーキテクチャレビュー（2日）
- Phase 2完了時: 機能統合レビュー（2日）
- Phase 3完了時: パフォーマンスレビュー（3日）
- Phase 4完了時: セキュリティレビュー（3日）

### 全体ウォークスルー
- 実施時期: 全Phase完了後
- 期間: 3-5日
- 重点確認事項:
  - [ ] 要件との整合性
  - [ ] アーキテクチャの一貫性
  - [ ] テストカバレッジ
  - [ ] パフォーマンス目標の達成

## 仕様フィードバックポイント

### Critical（作業中断レベル）
- [懸念される仕様の問題があれば記載]

### High（早急な協議が必要）
- [実装困難な仕様があれば記載]

### Medium（定期レビューで協議）
- [改善提案があれば記載]

## 補足事項
- TDD実践の監査ポイント
- CI/CD統合の考慮事項
- チーム間の依存関係
```

### 注意事項
1. **TDDの厳密な適用**: すべてのタスクでRed-Green-Refactorサイクルを必須とする
2. **レビューの組み込み**: 各Phase終了時に必ずレビューとリファクタリング期間を設ける
3. **仕様問題の早期発見**: タスク作成時点で仕様の問題を洗い出し、フィードバックポイントとして明記
4. **現実的な見積もり**: 1タスク2-4時間を基準とし、レビューとリファクタリングの時間も含める

---
*TDDは品質を作り込むプロセス。すべてのコードはテストから始まる。*