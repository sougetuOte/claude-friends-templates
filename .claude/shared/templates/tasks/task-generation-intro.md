# タスク生成フェーズ導入ガイド

## 目的
要件定義書（requirements.md）と技術設計書（design.md）を基に、TDD（テスト駆動開発）を厳密に適用した、具体的で実行可能な実装計画を作成します。

## 前提条件
- ✅ requirements.mdが完成している
- ✅ design.mdが完成している
- ✅ Plannerエージェントによるレビューが完了している
- ✅ TDD実践環境が整っている

## タスク生成の原則

### 1. トレーサビリティの確保
すべてのタスクは要件と設計に明確に紐づけられ、以下の形式で記載：
```markdown
- [ ] タスク名
  - _Requirements: [要件番号]_
  - _設計参照: [設計書セクション]_
  - _TDD適用: 必須_
```

### 2. t-wada式TDDの厳密適用
各タスクは必ず以下のステップを含む：
- 🔴 **Red**: 失敗するテストを先に書く
- 🟢 **Green**: 最小限の実装でテストを通す
- 🔵 **Refactor**: コードの品質を向上

### 3. フェーズベースの開発
- **Phase 1**: MVP（最小限の動作する製品）
- **Phase 2**: 基本機能の拡張
- **Phase 3**: 高度な機能
- **Phase 4**: 本番化対応

## タスク生成プロセス

### Step 1: 要件と設計の再確認
```markdown
## 確認チェックリスト
- [ ] すべての要件が設計に反映されている
- [ ] 設計の実現可能性が検証されている
- [ ] 非機能要件が考慮されている
- [ ] 依存関係が明確である
```

### Step 2: タスクの分解
各機能を以下の粒度に分解：
- **1タスク = 2-4時間で完了**
- **明確な完了条件**
- **独立してテスト可能**

### Step 3: TDDサイクルの計画
各タスクに対して：
```markdown
- [ ] タスク: ユーザー認証機能
  - テストファイル: `tests/test_auth.py`
  - 実装ファイル: `src/auth.py`
  - Red: 認証失敗のテストから開始
  - Green: 最小限の認証ロジック実装
  - Refactor: セキュリティ強化とエラーハンドリング
  - _Requirements: FR-001_
  - _設計参照: [認証設計](../design/auth.md)_
```

## タスク生成後のレビュー

### Phaseレビューチェックリスト
- [ ] すべての要件がタスクでカバーされている
- [ ] TDDサイクルが明確に定義されている
- [ ] 依存関係が適切に管理されている
- [ ] 工数見積もりが現実的である

### 全体ウォークスルーチェックリスト
- [ ] Phase間の整合性が保たれている
- [ ] リスクが特定され対策がある
- [ ] 非機能要件が適切に分散されている

## 仕様問題の取り扱い

タスク生成中に仕様の問題を発見した場合：

1. **即座に記録**
   - 問題の詳細を文書化
   - 影響範囲を特定

2. **重要度を判定**
   - 🔴 Critical: 作業を中断
   - 🟠 High: Phase終了後に協議
   - 🟡 Medium: 定期レビューで協議
   - 🟢 Low: バックログに追加

3. **ユーザーと協議**
   - 技術的な影響を説明
   - 代替案を提示
   - 決定を文書化

## 次のステップ

タスク生成が完了したら：

1. **Builderエージェントへ引き継ぎ**
   - タスクリストを共有
   - 優先順位を明確化
   - TDD実践の確認

2. **実装開始**
   - Phase 1から順次着手
   - 各タスクでRed-Green-Refactorを実践
   - 定期的なレビューとフィードバック

## テンプレートと参考資料

- [タスク生成テンプレート](./task-generation-template.md)
- [TDD厳密適用ガイド](./tdd-strict-guide.md)
- [Phaseレビューテンプレート](./phase-review-template.md)
- [仕様フィードバックプロセス](./specification-feedback-process.md)

---
*優れたタスク計画は、優れた実装の第一歩。TDDで品質を作り込む。*
