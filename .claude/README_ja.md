# Claude Friends Templates - .claudeディレクトリ

🌐 **[English](README.md)** | **日本語**

claude-friends-templatesシステムの中核へようこそ！このディレクトリには、マルチエージェントAI開発環境を動かすすべての設定、エージェント、スクリプト、テンプレートが含まれています。

## 📁 ディレクトリ構造

```
.claude/
├── 📋 設定とコンフィグ
│   ├── settings.json           # Claude Code設定
│   ├── hooks.yaml             # 代替フック設定
│   └── *.config.json          # 機能固有設定
│
├── 🤖 エージェントシステム
│   ├── agents/                # エージェント定義と設定
│   ├── planner/               # Plannerエージェント作業領域
│   ├── builder/               # Builderエージェント作業領域
│   └── sync-specialist/       # 同期エージェント作業領域
│
├── 🔧 スクリプトと自動化
│   ├── scripts/               # 自動化スクリプトとユーティリティ
│   ├── hooks/                 # Claude Codeフック実装
│   └── patches/               # セキュリティと機能パッチ
│
├── 📚 共有リソース
│   ├── shared/                # 共通テンプレートとユーティリティ
│   ├── commands/              # コマンド定義
│   └── guidelines/            # 開発ガイドライン
│
├── 🧪 テストインフラ
│   ├── tests/                 # テストスイートとフレームワーク
│   └── archive/               # アーカイブコンポーネント
│
└── 📖 ドキュメント
    ├── README.md              # このファイル
    ├── ARCHITECTURE.md        # システムアーキテクチャ
    ├── BEST_PRACTICES.md      # 開発ベストプラクティス
    └── *-README*.md           # 機能固有ドキュメント
```

## 🚀 はじめに

### クイックセットアップ
1. **リポジトリをクローン**: .claudeディレクトリは自動設定されます
2. **依存関係のインストール**: 基本機能には追加インストール不要
3. **使用開始**: `/agent:planner`や`/agent:builder`などのコマンドがすぐに使えます

### 基本コマンド
```bash
# Plannerエージェントに切り替え
/agent:planner

# Builderエージェントに切り替え
/agent:builder

# 特定エリアにフォーカス
/project:focus

# 日次ステータス確認
/project:daily
```

## 🤖 マルチエージェントシステム

システムには連携する専用エージェントがあります：

- **🎯 Plannerエージェント**: 戦略計画、アーキテクチャ設計、要件分析
- **🔨 Builderエージェント**: 実装、コーディング、テスト、デバッグ
- **🔄 Sync Specialist**: 状態同期とハンドオーバー管理
- **🛡️ Security Auditor**: セキュリティ分析と脆弱性検出
- **✅ Test Writer**: テスト駆動開発と品質保証

### エージェント連携
エージェントは以下を通じて自動的に状態を同期します：
- 構造化されたハンドオーバードキュメント
- `/memo/`での共有メモリーバンク
- TDDフェーズ追跡（🔴 Red → 🟢 Green → 🔵 Refactor）
- リアルタイム活動ログ

## 🔧 主要機能

### 1. 自動フックシステム
- **セキュリティチェック**: 危険なコマンドの実行前検証
- **自動フォーマット**: 複数言語の自動コードフォーマット
- **活動ログ**: 包括的な開発活動追跡
- **セッション管理**: 自動セッション要約とクリーンアップ

### 2. テスト駆動開発（TDD）
- 厳密なフェーズ追跡を含む統合TDDワークフロー
- 自動テスト生成と実行
- 品質ゲートとコンプライアンスチェック
- リファクタリングスケジューラと設計ドリフト検出

### 3. ドキュメント同期
- バイリンガルドキュメント（英語/日本語）同期
- 自動README更新
- アーキテクチャ決定記録（ADR）管理
- 設計変更追跡

### 4. メモリーバンクシステム
- 階層的プロジェクト知識整理
- 情報過多防止のための自動ノート回転
- エージェント切り替え間のコンテキスト保持
- 検索可能なプロジェクト履歴

## 📋 設定ファイル

### 主要設定
- **`settings.json`**: フックを含む主要Claude Code設定
- **`hooks.yaml`**: 代替フック設定形式
- **`*-config.json`**: 機能固有設定（セキュリティ、品質、リファクタリング）

### エージェント設定
- **`agents/`**: 個別エージェント定義と機能
- **`active.json`**: 現在のアクティブエージェント追跡
- **`commands/`**: 利用可能コマンドとその実装

## 🛠️ 自動化スクリプト

`scripts/`ディレクトリには強力な自動化ツールが含まれています：

| スクリプト | 目的 | トリガー |
|-----------|------|----------|
| `ai-logger.sh` | AI最適化活動ログ | 任意のツール使用後 |
| `auto-format.sh` | コードフォーマット | ファイル編集後 |
| `deny-check.sh` | セキュリティ検証 | Bash実行前 |
| `session-complete.sh` | セッション要約 | セッション終了時 |
| `notes-check-hook.sh` | ノート回転 | エージェント切り替え時 |

## 🧪 テストと品質

### テストフレームワーク
- **ユニットテスト**: 個別コンポーネントテスト
- **統合テスト**: マルチコンポーネントテスト
- **E2Eテスト**: 完全ワークフローテスト
- **パフォーマンステスト**: システムパフォーマンス監視

### 品質ゲート
- 自動コード品質チェック
- セキュリティ脆弱性スキャン
- 設計コンプライアンス検証
- テストカバレッジ要件

## 📖 ドキュメント

### コアドキュメント
- **ARCHITECTURE.md**: システム設計とコンポーネント関係
- **BEST_PRACTICES.md**: 開発ガイドラインと規約
- **MIGRATION_GUIDE.md**: アップグレードとマイグレーション手順

### 機能ドキュメント
- **hooks-README.md**: フックシステム詳細ガイド
- **security-README.md**: セキュリティ機能と設定
- **ai-logger-README.md**: AIログシステムガイド

## 🎯 使用パターン

### 典型的な開発ワークフロー
1. **Plannerから開始**: `/agent:planner`で戦略計画
2. **Builderに切り替え**: `/agent:builder`で実装
3. **TDDサイクル使用**: Red → Green → Refactorの自動追跡
4. **品質チェック**: 自動フックでコード品質確保
5. **ドキュメント**: バイリンガルドキュメントの自動更新

### メモリー管理
- ノートが450行を超えると自動回転
- プロジェクトコンテキストを`/memo/`階層で保持
- 振り返り分析用のセッション履歴維持

## 🔧 カスタマイズ

### 新機能の追加
1. 適切な`*-config.json`で機能固有設定を作成
2. `scripts/`ディレクトリに自動化スクリプトを追加
3. 必要に応じて`settings.json`のフックを更新
4. 適切なREADMEファイルにドキュメント追加

### エージェントの拡張
1. `agents/`に新しいエージェント定義を作成
2. `commands/`にコマンド定義を追加
3. 必要に応じてワークスペースセットアップを実装
4. `shared/agent-coordination/`の連携テンプレートを更新

## 🚨 トラブルシューティング

### よくある問題
- **フック動作不良**: `chmod +x .claude/scripts/*.sh`でスクリプト権限確認
- **エージェント切り替え失敗**: `agents/active.json`設定を確認
- **フォーマット問題**: フォーマッター（prettier、ruffなど）がインストールされているか確認
- **権限エラー**: ファイル権限とPATH環境変数を確認

### デバッグコマンド
```bash
# 全フックをテスト
.claude/scripts/test-hooks.sh

# セキュリティ機能をチェック
.claude/scripts/test-security.sh

# 活動ログを監視
tail -f ~/.claude/activity.log

# AIログを分析
.claude/scripts/analyze-ai-logs.py --format summary
```

## 🤝 コントリビューション

### 開発ガイドライン
1. 適切なフェーズ追跡でTDDプラクティスに従う
2. バイリンガルドキュメント（英語/日本語）を維持
3. エージェント切り替え時は構造化ハンドオーバーを使用
4. フックと自動化を徹底的にテスト
5. 新機能に関連するREADMEファイルを更新

### コード基準
- AI フレンドリーなコメントと構造を使用
- 確立された命名規則に従う
- 後方互換性を維持
- ADRで設計決定を文書化

## 🔗 関連リソース

- **メインプロジェクトREADME**: `../README.md`
- **アーキテクチャドキュメント**: `ARCHITECTURE.md`
- **ベストプラクティスガイド**: `BEST_PRACTICES.md`
- **フックシステムガイド**: `hooks-README.md`
- **エージェントシステムガイド**: `agents/README.md`

---

**注意**: このシステムは開発ニーズとともに進化するよう設計されています。コアなマルチエージェント連携の原則を維持しながら、設定をカスタマイズし新機能を追加してください。